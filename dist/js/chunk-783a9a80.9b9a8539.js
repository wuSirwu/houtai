(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-783a9a80"],{"0f8e":function(t,e,a){},"1f6d":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t._self._c;return e("div",[e("breadcrumb-nav",{scopedSlots:t._u([{key:"firstMenu",fn:function(){return[t._v("商品管理")]},proxy:!0},{key:"secondMenu",fn:function(){return[t._v("商品分类")]},proxy:!0}])}),e("category-card")],1)},o=[],i=a("ae71"),s=function(){var t=this,e=t._self._c;return e("el-card",[e("category-add",{on:{"category-list":t.updateCategoryList}}),e("category-table",{attrs:{"category-list":t.categoryList},on:{"category-list":t.updateCategoryList}}),e("el-pagination",{attrs:{"current-page":t.queryInfo.pagenum,"page-sizes":[2,5,7,10],"page-size":t.queryInfo.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)},n=[],l=function(){var t=this,e=t._self._c;return e("div",[e("el-row",[e("el-col",[e("el-button",{attrs:{type:"primary"},on:{click:t.showAddDialog}},[t._v("添加分类")])],1)],1),e("el-dialog",{attrs:{title:"提示",visible:t.addDialogVisible,width:"50%"},on:{"update:visible":function(e){t.addDialogVisible=e},close:t.addCategoryDialogClose}},[e("el-form",{ref:"addCategoryFormRef",attrs:{model:t.addCategoryForm,rules:t.categoryFormRules,"label-width":"100px"}},[e("el-form-item",{attrs:{label:"分类名称",prop:"cat_name"}},[e("el-input",{model:{value:t.addCategoryForm.cat_name,callback:function(e){t.$set(t.addCategoryForm,"cat_name",e)},expression:"addCategoryForm.cat_name"}})],1),e("el-form-item",{attrs:{label:"父级分类"}},[e("el-cascader",{attrs:{options:t.parentCategoryList,props:t.cascaderProps,clearable:""},on:{change:t.parentCategoryChange},model:{value:t.selectedKeys,callback:function(e){t.selectedKeys=e},expression:"selectedKeys"}})],1)],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.addDialogVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.addCategory}},[t._v("确 定")])],1)],1)],1)},c=[],d=a("de5d"),u={name:"CategoryAdd",data(){return{addDialogVisible:!1,addCategoryForm:{cat_name:"",cat_pid:0,cat_level:0},categoryFormRules:{cat_name:[{required:!0,message:"请输入分类名称",trigger:"blur"}]},parentCategoryList:[],cascaderProps:{expandTrigger:"hover",value:"cat_id",label:"cat_name",children:"children",checkStrictly:!0},selectedKeys:[]}},methods:{showAddDialog(){this.getParentCategoryList(),this.addDialogVisible=!0},getParentCategoryList(){Object(d["f"])({type:2}).then(t=>{let e=t.data;if(200!==e.meta.status)return this.alertMessage("获取父级分类数据失败","error");this.parentCategoryList=e.data})},parentCategoryChange(){let t=this.selectedKeys;if(t.length>0)return this.addCategoryForm.cat_pid=t[t.length-1],void(this.addCategoryForm.cat_level=t.length);this.addCategoryForm.cat_pid=0,this.addCategoryForm.cat_level=0},addCategory(){console.log(this.addCategoryForm),this.$refs.addCategoryFormRef.validate(t=>{t&&Object(d["a"])(this.addCategoryForm).then(t=>{let e=t.data;if(201!==e.meta.status)return this.alertMessage("添加分类失败","error");this.alertMessage("添加分类成功","success"),this.$emit("category-list"),this.addDialogVisible=!1})})},addCategoryDialogClose(){this.$refs.addCategoryFormRef.resetFields(),this.selectedKeys=[],this.addCategoryForm.cat_level=0,this.addCategoryForm.cat_pid=0}}},g=u,m=(a("fd5f"),a("0b56")),f=Object(m["a"])(g,l,c,!1,null,"45b9b61e",null),y=f.exports,p=function(){var t=this,e=t._self._c;return e("tree-table",{staticClass:"tree-table",attrs:{data:t.categoryList,columns:t.columns,"selection-type":!1,"expand-type":!1,"show-index":"","index-text":"#",border:""},scopedSlots:t._u([{key:"isok",fn:function(t){return[t.row.cat_deleted?e("i",{staticClass:"el-icon-error closeIcon"}):e("i",{staticClass:"el-icon-success checkIcon"})]}},{key:"order",fn:function(a){return[0===a.row.cat_level?e("el-tag",{attrs:{size:"mini"}},[t._v("一级")]):1===a.row.cat_level?e("el-tag",{attrs:{type:"success",size:"mini"}},[t._v("二级")]):e("el-tag",{attrs:{type:"warning",size:"mini"}},[t._v("三级")])]}},{key:"opt",fn:function(a){return[e("category-edit",{attrs:{id:a.row.cat_id},on:{"category-list":t.updateCategoryList}}),e("category-remove",{attrs:{id:a.row.cat_id},on:{"category-list":t.updateCategoryList}})]}}])})},h=[],b=function(){var t=this,e=t._self._c;return e("div",{staticClass:"editDialog"},[e("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit"},on:{click:function(e){return t.showEditDialog(t.id)}}},[t._v("编辑")]),e("el-dialog",{attrs:{title:"编辑",visible:t.editDialogVisible,width:"50%"},on:{"update:visible":function(e){t.editDialogVisible=e},close:t.editDialogClose}},[e("el-form",{ref:"editCategoryFormRef",attrs:{model:t.editCategoryForm,rules:t.categoryFormRules,"label-width":"80px"}},[e("el-form-item",{attrs:{label:"分类名称",prop:"cat_name"}},[e("el-input",{model:{value:t.editCategoryForm.cat_name,callback:function(e){t.$set(t.editCategoryForm,"cat_name",e)},expression:"editCategoryForm.cat_name"}})],1)],1),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(e){t.editDialogVisible=!1}}},[t._v("取 消")]),e("el-button",{attrs:{type:"primary"},on:{click:t.editCategory}},[t._v("确 定")])],1)],1)],1)},C=[],_={name:"CategoryEdit",props:{id:{type:Number,default:0}},data(){return{editDialogVisible:!1,categoryFormRules:{cat_name:[{required:!0,message:"请输入分类名称",trigger:"blur"}]},editCategoryForm:{cat_name:""}}},methods:{showEditDialog(t){Object(d["g"])(t).then(t=>{let e=t.data;if(200!==e.meta.status)return this.alertMessage("获取信息失败","error");this.editCategoryForm=e.data,this.editDialogVisible=!0})},editDialogClose(){this.$refs.editCategoryFormRef.resetFields()},editCategory(){this.$refs.editCategoryFormRef.validate(t=>{t&&Object(d["d"])(this.editCategoryForm).then(t=>{let e=t.data;if(200!==e.meta.status)return this.alertMessage("修改失败","error");this.alertMessage("修改成功","success"),this.editDialogVisible=!1,this.$emit("category-list")})})}}},v=_,F=(a("6326"),Object(m["a"])(v,b,C,!1,null,"6852f478",null)),j=F.exports,O=function(){var t=this,e=t._self._c;return e("el-button",{attrs:{type:"danger",size:"mini",icon:"el-icon-delete"},on:{click:function(e){return t.removeCategory(t.id)}}},[t._v("删除")])},k=[],w={name:"CategoryRemove",props:{id:{type:Number,default:0}},methods:{removeCategory(t){this.$confirm("此操作将删除该分类, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{Object(d["k"])(t).then(t=>{let e=t.data;if(200!==e.meta.status)return this.alertMessage("删除失败","error");this.alertMessage("删除成功","success"),this.$emit("category-list")})}).catch(()=>{this.alertMessage("已取消删除","info")})}}},x=w,D=Object(m["a"])(x,O,k,!1,null,"c87c8a40",null),L=D.exports,$={name:"CategoryTable",components:{CategoryEdit:j,CategoryRemove:L},props:{categoryList:{type:Array,default(){return[]}}},data(){return{columns:[{label:"分类名称",prop:"cat_name"},{label:"是否有效",type:"template",template:"isok"},{label:"排序",type:"template",template:"order"},{label:"操作",type:"template",template:"opt"}]}},methods:{updateCategoryList(){this.$emit("category-list")}}},z=$,M=(a("f761"),Object(m["a"])(z,p,h,!1,null,"7a020fd6",null)),R=M.exports,V={name:"CategoryCard",components:{CategoryAdd:y,CategoryTable:R},data(){return{queryInfo:{type:3,pagenum:1,pagesize:2},categoryList:[],total:0}},created(){this.getCategoriesList()},methods:{getCategoriesList(){Object(d["f"])(this.queryInfo).then(t=>{let e=t.data;if(200!==e.meta.status)return this.alertMessage("商品列表获取失败","error");this.categoryList=e.data.result,this.total=e.data.total})},updateCategoryList(){this.getCategoriesList()},handleSizeChange(t){this.queryInfo.pagesize=t,this.getCategoriesList()},handleCurrentChange(t){this.queryInfo.pagenum=t,this.getCategoriesList()}}},I=V,q=Object(m["a"])(I,s,n,!1,null,"e02021da",null),K=q.exports,A={name:"GoodsCategory",components:{BreadcrumbNav:i["a"],CategoryCard:K}},S=A,T=Object(m["a"])(S,r,o,!1,null,"41728d92",null);e["default"]=T.exports},"474f":function(t,e,a){},6326:function(t,e,a){"use strict";a("474f")},ae71:function(t,e,a){"use strict";var r=function(){var t=this,e=t._self._c;return e("el-breadcrumb",{attrs:{separator:"/"}},[e("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[t._v("首页")]),e("el-breadcrumb-item",[t._t("firstMenu",(function(){return[t._v("一级菜单")]}))],2),e("el-breadcrumb-item",[t._t("secondMenu",(function(){return[t._v("二级菜单")]}))],2)],1)},o=[],i={name:"BreadcrumbNav"},s=i,n=a("0b56"),l=Object(n["a"])(s,r,o,!1,null,"2d65e998",null);e["a"]=l.exports},de5d:function(t,e,a){"use strict";a.d(e,"f",(function(){return o})),a.d(e,"a",(function(){return i})),a.d(e,"g",(function(){return s})),a.d(e,"d",(function(){return n})),a.d(e,"k",(function(){return l})),a.d(e,"h",(function(){return c})),a.d(e,"c",(function(){return d})),a.d(e,"j",(function(){return u})),a.d(e,"e",(function(){return g})),a.d(e,"m",(function(){return m})),a.d(e,"i",(function(){return f})),a.d(e,"l",(function(){return y})),a.d(e,"b",(function(){return p}));var r=a("1bab");function o(t){return Object(r["a"])({url:"/categories",params:t})}function i(t){return Object(r["a"])({url:"/categories",method:"post",data:{...t}})}function s(t){return Object(r["a"])({url:"/categories/"+t})}function n(t){return Object(r["a"])({url:"/categories/"+t.cat_id,method:"put",data:{cat_name:t.cat_name}})}function l(t){return Object(r["a"])({url:"/categories/"+t,method:"delete"})}function c(t,e){return Object(r["a"])({url:`/categories/${t}/attributes`,params:{sel:e}})}function d(t){return Object(r["a"])({url:`/categories/${t.id}/attributes`,method:"post",data:{attr_name:t.attr_name,attr_sel:t.attr_sel}})}function u(t){return Object(r["a"])({url:`/categories/${t.id}/attributes/${t.attrId}`,params:{attr_sel:t.attr_sel}})}function g(t){return Object(r["a"])({url:`/categories/${t.id}/attributes/${t.attrId}`,method:"put",data:{attr_name:t.attr_name,attr_sel:t.attr_sel}})}function m(t){return Object(r["a"])({url:`/categories/${t.id}/attributes/${t.attrId}`,method:"delete"})}function f(t){return Object(r["a"])({url:"/goods",params:t})}function y(t){return Object(r["a"])({url:"/goods/"+t,method:"delete"})}function p(t){return Object(r["a"])({url:"/goods",method:"post",data:t})}},e362:function(t,e,a){},f761:function(t,e,a){"use strict";a("0f8e")},fd5f:function(t,e,a){"use strict";a("e362")}}]);
//# sourceMappingURL=chunk-783a9a80.9b9a8539.js.map